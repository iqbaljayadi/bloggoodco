;(function($,window,document,undefined){var pluginName='SmartNotifyReload',defaults={vertical:'top',vMargin:'30px',horizontal:'right',hMargin:'20px',wrapWidth:'300px',boxWidth:'70%',btnFaid:'0.5',headHeight:'40px',headBg:'#6DBCDB',titleFontSize:'18px',titleColor:'#ffffff',titleWeight:'bold',cmColor:'#C1DDFF',cmFontSize:'18px',toggleHeight:'40px',toggleBg:'#4F889E',toggleColor:'#C1DDFF',toggleFontSize:'16px',bodyBg:'#ffffff',contentPadding:'10px',onlyOne:'off',toggleMode:'off',hideMenu:'off',showNow:'off',showWhen:'timer',timerOpenTime:'2000',closeTimer:'off',timerCloseTime:'3000',scrolling:'off',scrollCoor:'200',sound:'on',overBg:'#000000',overOpacity:'0.5',showOne:'off',expiresCookie:1,tooLong:'off',tooLongHeight:'400px'};function NotifyReload(element,options){this.element=$(element);var ele=this;this.options=$.extend({},defaults,options);this._defaults=defaults;this._name=pluginName;this.smart_data_count='off';this.init(ele)};NotifyReload.prototype.createMain=function(ele){this.main=$(document).find('[data-notifyrelo="main-container"]');if(this.main.length===0){$('body').append('<div data-notifyrelo="main-container" style="'+this.options.vertical+':'+this.options.vMargin+';'+this.options.horizontal+':'+this.options.hMargin+';"></div>');this.main=$(document).find('[data-notifyrelo="main-container"]')};if(this.options.sound==='on'){this.sound=$(document).find('[data-notifyrelo="sound"]')[0]}};NotifyReload.prototype.variables=function(ele){this.element_label=this.element.attr('data-notifylabel');this.head=this.element.children('[data-notifyrelo="head"]');this.logo=this.head.children('[data-notifyrelo="logo"]');this.title=this.head.children('[data-notifyrelo="title"]');this.panel=this.head.children('[data-notifyrelo="panel"]');this.drop_down=this.panel.children('[data-notifyrelo="btn-drop-down"]');this.close=this.panel.children('[data-notifyrelo="close"]');this.body=this.element.children('[data-notifyrelo="body"]');this.toggle_panel=this.body.children('[data-notifyrelo="toggle-panel"]');this.resizefull=this.toggle_panel.children('[data-notifyrelo="btn-resizefull"]');this.resizevertical=this.toggle_panel.children('[data-notifyrelo="btn-resizevertical"]');this.content=this.body.children('[data-notifyrelo="content"]');this.hidden_content=this.body.children('[data-notifyrelo="hidden-content"]');this.labels=this.element.attr('data-notifylabel');this.cookieLabel='notifyreloadcookie'+this.labels;this.btn=$(document).find('[data-btnlabel="'+this.labels+'"]');this.overlay=$('[data-notifyrelo="main-overlay"]');this.winHeight=$(window).height();this.winWidth=$(window).width();this.read=$.cookie(this.cookieLabel)};NotifyReload.prototype.stylesset=function(ele){if(this.options.horizontal==='right'){this.element.css({'width':this.options.wrapWidth,'float':'right','clear':'both'})}else{this.element.css({'width':this.options.wrapWidth,'float':'left','clear':'both'})};this.head.css({'height':this.options.headHeight,'line-height':this.options.headHeight,'background-color':this.options.headBg});this.title.css({'color':this.options.titleColor,'font-size':this.options.titleFontSize,'font-weight':this.options.titleWeight});this.panel.css({'color':this.options.cmColor,'font-size':this.options.cmFontSize});this.body.css('background-color',this.options.bodyBg);this.toggle_panel.css({'line-height':this.options.toggleHeight,'background-color':this.options.toggleBg,'color':this.options.toggleColor,'font-size':this.options.toggleFontSize});this.content.css('padding',this.options.contentPadding);if(this.options.tooLong==='on'){this.content.css({'height':this.options.tooLongHeight,'overflow':'auto'})};this.hidden_content.css({'padding-bottom':this.options.contentPadding,'padding-right':this.options.contentPadding,'padding-left':this.options.contentPadding});this.overlay.css('background-color',this.options.overBg);if(this.options.hideMenu==='on'){this.drop_down.css('display','none')};if(this.options.showOne!=='on'&&this.read){$.cookie(this.cookieLabel,null,{path:"/"})}};NotifyReload.prototype.cookie=function(){if(!this.read){$.cookie(this.cookieLabel,'on',{path:"/",expires:this.options.expiresCookie})};this.read=$.cookie(this.cookieLabel)};NotifyReload.prototype.resizeevents=function(ele){var resize=$('.data-notifyrelo-resize');if(resize.length&&resize.attr('data-notifylabel')===this.element_label){var resize_width=resize.innerWidth(),resize_height=resize.innerHeight(),winWidth=$(window).width(),winHeight=$(window).height(),calWidth=winWidth/2-resize_width/2,calHeight=winHeight/2-resize_height/2;resize.css({'top':calHeight,'left':calWidth})}};NotifyReload.prototype.handlers=function(ele){var handMethods={dropdown:function(){var ts0=$(this).closest('[data-notifyrelo="head"]').siblings('[data-notifyrelo="body"]'),ts=ts0.children('[data-notifyrelo="toggle-panel"]'),tsbtn=ts.children('i');if(ts0.data('toggled')==='true'){ts0.css('display','block');ts0.data('toggled','false')}else if(ts0.data('toggled')==='false'){ts0.stop(true).slideUp(300,function(){ts0.css('display','none')});ts0.data('toggled','true')};if(ts.data('active')!=='true'){tsbtn.css('display','inline-block');ts.stop(true).animate({'height':ele.options.toggleHeight},400,'easeOutQuad');$(this).stop(true).fadeTo(200,ele.options.btnFaid);ts.data('active','true')}else{tsbtn.css('display','none');ts.stop(true).animate({'height':'0'},400,'easeOutQuad');$(this).stop(true).fadeTo(200,1);ts.data('active','false')}},resizevertical:function(){var ts=$(this).parent().siblings('[data-notifyrelo="hidden-content"]');if(ts.data('active')!=='true'){ts.stop(true).show();$(this).stop(true).fadeTo(200,ele.options.btnFaid);ts.data('active','true')}else{ts.stop(true).hide();$(this).stop(true).fadeTo(200,1);ts.data('active','false')}},closenotify:function(){$(this).closest('[data-notifyrelo="wrapper"]').detach();ele.overlay.css('display','none')},shownotify:function(){function showIt(arg){function soundIt(){if(ele.options.sound==='on'){if($.support.style==true){ele.sound.play()}}};if(ele.options.showOne==='on'&&!ele.read){arg.fadeTo(1000,1);soundIt();ele.cookie()}else if(ele.options.showOne==='off'&&!ele.read){arg.fadeTo(1000,1);soundIt()}};if(ele.options.closeTimer==='on'){clearTimeout(timerclear);var timerclear=setTimeout(function(){if($('[data-notifylabel="'+ele.labels+'"]').hasClass('data-notifyrelo-resize')===true){ele.overlay.css('display','none')};$('[data-notifylabel="'+ele.labels+'"]').detach()},ele.options.timerCloseTime)};if(!ele.read){if(ele.btn.length||ele.options.showNow==='on'||ele.options.scrolling==='on'){if(ele.options.onlyOne==='off'){var selfi=ele.element.clone(true,true).prependTo(ele.main)}else{var selfi=ele.element.prependTo(ele.main)};showIt(selfi)}};var caseheight=ele.main.height(),notifycol=ele.main.children('[data-notifyrelo="wrapper"]');if(caseheight>ele.winHeight&&notifycol.length>1){notifycol.eq(-1).detach()}},scrollevent:function(){if($(document).scrollTop()>=ele.options.scrollCoor&&ele.smart_data_count==='off'){handMethods.shownotify();ele.smart_data_count='on'}},resizefull:function(){var wrapper_th=$(this).closest('[data-notifyrelo="wrapper"]');$(this).css('display','none');wrapper_th.add(this).end().css('display','none').insertAfter(ele.overlay).addClass('data-notifyrelo-resize').css('width',ele.options.boxWidth);ele.resizeevents(ele);wrapper_th.fadeTo(800,1);ele.overlay.fadeTo(800,ele.options.overOpacity)},onevents:function(){ele.close.on('click.zlCloseNotify',this.closenotify);ele.btn.on('click.zlShowNotify',this.shownotify);ele.drop_down.on('click.zlDropDown',this.dropdown);ele.resizevertical.on('click.zlToggleContent',this.resizevertical);ele.resizefull.on('click.zlResizeFull',this.resizefull);if(ele.options.scrolling==='on'){$(window).on('scroll.zlScrolling',this.scrollevent)};if(ele.options.toggleMode==='on'){ele.body.css('display','none').data('toggled','true')}}};handMethods.onevents();if(this.options.showNow==='on'){if(this.options.showWhen==='now'){handMethods.shownotify()}else if(this.options.showWhen==='timer'){clearTimeout(showtimeout);var showtimeout=setTimeout(function(){handMethods.shownotify()},this.options.timerOpenTime)}}};NotifyReload.prototype.init=function(ele){this.createMain(ele);this.variables(ele);this.stylesset(ele);this.handlers(ele);var timer_resize;$(window).on('resize.zlResizeEvents',function(){clearTimeout(timer_resize);var timer_resize=setTimeout(function(){ele.resizeevents(ele)},100)})};$.fn[pluginName]=function(options){return this.each(function(){if(!$.data(this,'plugin_'+pluginName)){$.data(this,'plugin_'+pluginName,new NotifyReload(this,options))}})}})(jQuery,window,document);